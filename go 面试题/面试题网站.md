https://geektutu.com/post/qa-golang-1.html

















## Q1 `=` 和 `:=` 的区别？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">:=</code><span>&nbsp;</span>声明+赋值</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">=</code><span>&nbsp;</span>仅赋值</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> foo <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">int</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">foo = <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">10</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 等价于</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">foo := <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">10</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q2 指针的作用？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">指针用来保存变量的地址。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">例如</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> x =  <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">5</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> p *<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">int</span> = &amp;x</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">fmt.Printf(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"x = %d"</span>,  *p) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// x 可以用 *p 访问</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">*</code><span>&nbsp;</span>运算符，也称为解引用运算符，用于访问地址中的值。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">＆</code>运算符，也称为地址运算符，用于返回变量的地址。</li></ul></div></details>

## Q3 Go 允许多个返回值吗？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">允许</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">swap</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">(x, y <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span>)</span> <span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">(<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span>, <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span>)</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">   <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> y, x</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">   a, b := swap(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"A"</span>, <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"B"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">   fmt.Println(a, b) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// B A</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q4 Go 有异常类型吗？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">Go 没有异常类型，只有错误类型（Error），通常使用返回值来表示异常状态。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;">f, err := os.Open(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"test.txt"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> err != <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">nil</span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    log.Fatal(err)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q5 什么是协程（Goroutine）

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">Goroutine 是与其他函数或方法同时运行的函数或方法。 Goroutines 可以被认为是轻量级的线程。 与线程相比，创建 Goroutine 的开销很小。 Go应用程序同时运行数千个 Goroutine 是非常常见的做法。</p></div></details>

## Q6 如何高效地拼接字符串

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">Go 语言中，字符串是只读的，也就意味着每次修改操作都会创建一个新的字符串。如果需要拼接多次，应使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">strings.Builder</code>，最小化内存拷贝次数。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> str strings.Builder</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">for</span> i := <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">0</span>; i &lt; <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">1000</span>; i++ {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    str.WriteString(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"a"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">fmt.Println(str.String())</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q7 什么是 rune 类型

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">ASCII 码只需要 7 bit 就可以完整地表示，但只能表示英文字母在内的128个字符，为了表示世界上大部分的文字系统，发明了 Unicode， 它是ASCII的超集，包含世界上书写系统中存在的所有字符，并为每个代码分配一个标准编号（称为Unicode CodePoint），在 Go 语言中称之为 rune，是 int32 类型的别名。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">Go 语言中，字符串的底层表示是 byte (8 bit) 序列，而非 rune (32 bit) 序列。例如下面的例子中<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">语</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">言</code><span>&nbsp;</span>使用 UTF-8 编码后各占 3 个 byte，因此<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">len("Go语言")</code><span>&nbsp;</span>等于 8，当然我们也可以将字符串转换为 rune 序列。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;">fmt.Println(<span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">len</span>(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Go语言"</span>)) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 8</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">fmt.Println(<span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">len</span>([]<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">rune</span>(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Go语言"</span>))) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 4</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q8 如何判断 map 中是否包含某个 key ？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> val, ok := dict[<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"foo"</span>]; ok {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">//do something here</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">dict["foo"]</code><span>&nbsp;</span>有 2 个返回值，val 和 ok，如果 ok 等于<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">true</code>，则说明 dict 包含 key<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">"foo"</code>，val 将被赋予<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">"foo"</code><span>&nbsp;</span>对应的值。</p></div></details>

## Q9 Go 支持默认参数或可选参数吗？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">Go 语言不支持可选参数（python 支持），也不支持方法重载（java支持）。</p></div></details>

## Q10 defer 的执行顺序

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">多个 defer 语句，遵从后进先出(Last In First Out，LIFO)的原则，最后声明的 defer 语句，最先得到执行。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">defer 在 return 语句之后执行，但在函数退出之前，defer 可以修改返回值。</li></ul><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">例如：</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">test</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">int</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	i := <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">0</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">defer</span> <span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"defer1"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	}()</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">defer</span> <span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		i += <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">1</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"defer2"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	}()</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> i</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"return"</span>, test())</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// defer2</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// defer1</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// return 0</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">这个例子中，可以看到 defer 的执行顺序：后进先出。但是返回值并没有被修改，这是由于 Go 的返回机制决定的，执行 return 语句后，Go 会创建一个临时变量保存返回值，因此，defer 语句修改了局部变量 i，并没有修改返回值。那如果是有名的返回值呢？</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">test</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span> <span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">(i <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">int</span>)</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	i = <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">0</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">defer</span> <span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		i += <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">1</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"defer2"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	}()</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> i</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"return"</span>, test())</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// defer2</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// return 1</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">这个例子中，返回值被修改了。对于有名返回值的函数，执行 return 语句时，并不会再创建临时变量保存，因此，defer 语句修改了 i，即对返回值产生了影响。</p></div></details>

## Q11 如何交换 2 个变量的值？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;">a, b := <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"A"</span>, <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"B"</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">a, b = b, a</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">fmt.Println(a, b) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// B A</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q12 Go 语言 tag 的用处？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">tag 可以理解为 struct 字段的注解，可以用来定义字段的一个或多个属性。框架/工具可以通过反射获取到某个字段定义的属性，采取相应的处理方式。tag 丰富了代码的语义，增强了灵活性。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">例如：</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">package</span> main</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">import</span> <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"fmt"</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">import</span> <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"encoding/json"</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> Stu <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Name <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span> <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">`json:"stu_name"`</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	ID   <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span> <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">`json:"stu_id"`</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Age  <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">int</span>    <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">`json:"-"`</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	buf, _ := json.Marshal(Stu{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Tom"</span>, <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"t001"</span>, <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">18</span>})</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Printf(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"%s\n"</span>, buf)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">这个例子使用 tag 定义了结构体字段与 json 字段的转换关系，Name -&gt;<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">stu_name</code>, ID -&gt;<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">stu_id</code>，忽略 Age 字段。很方便地实现了 Go 结构体与不同规范的 json 文本之间的转换。</p></div></details>

## Q13 如何判断 2 个字符串切片（slice) 是相等的？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">go 语言中可以使用反射<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">reflect.DeepEqual(a, b)</code><span>&nbsp;</span>判断 a、b 两个切片是否相等，但是通常不推荐这么做，使用反射非常影响性能。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">通常采用的方式如下，遍历比较切片中的每一个元素（注意处理越界的情况）。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">StringSliceEqualBCE</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">(a, b []<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span>)</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">bool</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> <span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">len</span>(a) != <span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">len</span>(b) {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">        <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">false</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    }</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> (a == <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">nil</span>) != (b == <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">nil</span>) {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">        <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">false</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    }</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    b = b[:<span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">len</span>(a)]</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">for</span> i, v := <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">range</span> a {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">        <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> v != b[i] {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">            <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">false</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">        }</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    }</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">    <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">true</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q14 字符串打印时，`%v` 和 `%+v` 的区别

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">%v</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">%+v</code><span>&nbsp;</span>都可以用来打印 struct 的值，区别在于<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">%v</code><span>&nbsp;</span>仅打印各个字段的值，<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">%+v</code><span>&nbsp;</span>还会打印各个字段的名称。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> Stu <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Name <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Printf(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"%v\n"</span>, Stu{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Tom"</span>}) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// {Tom}</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Printf(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"%+v\n"</span>, Stu{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Tom"</span>}) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// {Name:Tom}</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">但如果结构体定义了<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">String()</code><span>&nbsp;</span>方法，<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">%v</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">%+v</code><span>&nbsp;</span>都会调用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">String()</code><span>&nbsp;</span>覆盖默认值。</p></div></details>

## Q15 Go 语言中如何表示枚举值(enums)

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">通常使用常量(const) 来表示枚举值。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> StuType <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">int32</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">const</span> (</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Type1 StuType = <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">iota</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Type2</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Type3</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Type4</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(Type1, Type2, Type3, Type4) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 0, 1, 2, 3</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">参考<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/14426366/what-is-an-idiomatic-way-of-representing-enums-in-go" style="box-sizing: border-box; text-decoration: none; color: rgb(51, 122, 183); background-color: transparent;">What is an idiomatic way of representing enums in Go? - StackOverflow</a></p></div></details>

## Q16 空 struct{} 的用途

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">使用空结构体 struct{} 可以节省内存，一般作为占位符使用，表明这里并不需要一个值。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;">fmt.Println(unsafe.Sizeof(<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span>{}{})) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 0</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">比如使用 map 表示集合时，只关注 key，value 可以使用 struct{} 作为占位符。如果使用其他类型作为占位符，例如 int，bool，不仅浪费了内存，而且容易引起歧义。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> Set <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">map</span>[<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span>]<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span>{}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	set := <span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">make</span>(Set)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">for</span> _, item := <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">range</span> []<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span>{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"A"</span>, <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"A"</span>, <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"B"</span>, <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"C"</span>} {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		set[item] = <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span>{}{}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(<span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">len</span>(set)) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 3</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">if</span> _, ok := set[<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"A"</span>]; ok {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"A exists"</span>) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// A exists</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">再比如，使用信道(channel)控制并发时，我们只是需要一个信号，但并不需要传递值，这个时候，也可以使用 struct{} 代替。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	ch := <span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">make</span>(<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">chan</span> <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span>{}, <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">1</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">go</span> <span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		&lt;-ch</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">		<span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// do something</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	}()</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	ch &lt;- <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span>{}{}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// ...</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">再比如，声明只包含方法的结构体。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> Lamp <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span>{}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">(l Lamp)</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">On</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">        <span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">println</span>(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"On"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">(l Lamp)</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">Off</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">        <span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">println</span>(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Off"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

------

专题: [`Go 语言面试题`](https://geektutu.com/series/#Go 语言面试题)

## Q1 init() 函数是什么时候执行的？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">init()</code><span>&nbsp;</span>函数是 Go 程序初始化的一部分。Go 程序初始化先于 main 函数，由 runtime 初始化每个导入的包，初始化顺序不是按照从上到下的导入顺序，而是按照解析的依赖关系，没有依赖的包最先初始化。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">每个包首先初始化包作用域的常量和变量（常量优先于变量），然后执行包的<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">init()</code><span>&nbsp;</span>函数。同一个包，甚至是同一个源文件可以有多个<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">init()</code><span>&nbsp;</span>函数。<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">init()</code><span>&nbsp;</span>函数没有入参和返回值，不能被其他函数调用，同一个包内多个<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">init()</code><span>&nbsp;</span>函数的执行顺序不作保证。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">一句话总结： import –&gt; const –&gt; var –&gt;<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">init()</code><span>&nbsp;</span>–&gt;<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">main()</code></p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">示例：</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">package</span> main</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">import</span> <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"fmt"</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">init</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span>  {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"init1:"</span>, a)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">init</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span>  {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"init2:"</span>, a)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> a = <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">10</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">const</span> b = <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">100</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"main:"</span>, a)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 执行结果</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// init1: 10</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// init2: 10</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// main: 10</span></span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

## Q2 Go 语言的局部变量分配在栈上还是堆上？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">由编译器决定。Go 语言编译器会自动决定把一个变量放在栈还是放在堆，编译器会做逃逸分析(escape analysis)，当发现变量的作用域没有超出函数范围，就可以在栈上，反之则必须分配在堆上。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">foo</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span> *<span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">int</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	v := <span class="number" style="box-sizing: border-box; color: rgb(113, 140, 0);">11</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">return</span> &amp;v</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	m := foo()</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="built_in" style="box-sizing: border-box; color: rgb(227, 98, 9);">println</span>(*m) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// 11</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">foo()</code><span>&nbsp;</span>函数中，如果 v 分配在栈上，foo 函数返回时，<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">&amp;v</code><span>&nbsp;</span>就不存在了，但是这段函数是能够正常运行的。Go 编译器发现 v 的引用脱离了 foo 的作用域，会将其分配在堆上。因此，main 函数中仍能够正常访问该值。</p></div></details>

## Q3 2 个 interface 可以比较吗？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">Go 语言中，interface 的内部实现包含了 2 个字段，类型<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">T</code><span>&nbsp;</span>和 值<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">V</code>，interface 可以使用<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">==</code><span>&nbsp;</span>或<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">!=</code><span>&nbsp;</span>比较。2 个 interface 相等有以下 2 种情况</p><ol style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">两个 interface 均等于 nil（此时 V 和 T 都处于 unset 状态）</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">类型 T 相同，且对应的值 V 相等。</li></ol><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">看下面的例子：</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> Stu <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">struct</span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	Name <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> StuInt <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">interface</span>{}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> stu1, stu2 StuInt = &amp;Stu{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Tom"</span>}, &amp;Stu{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Tom"</span>}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> stu3, stu4 StuInt = Stu{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Tom"</span>}, Stu{<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"Tom"</span>}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(stu1 == stu2) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// false</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(stu3 == stu4) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// true</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">stu1</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">stu2</code><span>&nbsp;</span>对应的类型是<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">*Stu</code>，值是 Stu 结构体的地址，两个地址不同，因此结果为 false。<br style="box-sizing: border-box;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">stu3</code><span>&nbsp;</span>和<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">stu4</code><span>&nbsp;</span>对应的类型是<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">Stu</code>，值是 Stu 结构体，且各字段相等，因此结果为 true。</p></div></details>

## Q4 两个 nil 可能不相等吗？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">可能。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">接口(interface) 是对非接口值(例如指针，struct等)的封装，内部实现包含 2 个字段，类型<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">T</code><span>&nbsp;</span>和 值<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">V</code>。一个接口等于 nil，当且仅当 T 和 V 处于 unset 状态（T=nil，V is unset）。</p><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">两个接口值比较时，会先比较 T，再比较 V。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">接口值与非接口值比较时，会先将非接口值尝试转换为接口值，再比较。</li></ul><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> p *<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">int</span> = <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">nil</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> i <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">interface</span>{} = p</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(i == p) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// true</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(p == <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">nil</span>) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// true</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(i == <span class="literal" style="box-sizing: border-box; color: rgb(227, 98, 9);">nil</span>) <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// false</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">上面这个例子中，将一个 nil 非接口值 p 赋值给接口 i，此时，i 的内部字段为<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">(T=*int, V=nil)</code>，i 与 p 作比较时，将 p 转换为接口后再比较，因此<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">i == p</code>，p 与 nil 比较，直接比较值，所以<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">p == nil</code>。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">但是当 i 与 nil 比较时，会将 nil 转换为接口<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">(T=nil, V=nil)</code>，与i<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">(T=*int, V=nil)</code><span>&nbsp;</span>不相等，因此<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">i != nil</code>。因此 V 为 nil ，但 T 不为 nil 的接口不等于 nil。</p></div></details>

## Q5 简述 Go 语言GC(垃圾回收)的工作原理

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">最常见的垃圾回收算法有标记清除(Mark-Sweep) 和引用计数(Reference Count)，Go 语言采用的是标记清除算法。并在此基础上使用了三色标记法和写屏障技术，提高了效率。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">标记清除收集器是跟踪式垃圾收集器，其执行过程可以分成标记（Mark）和清除（Sweep）两个阶段：</p><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">标记阶段 — 从根对象出发查找并标记堆中所有存活的对象；</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">清除阶段 — 遍历堆中的全部对象，回收未被标记的垃圾对象并将回收的内存加入空闲链表。</li></ul><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">标记清除算法的一大问题是在标记期间，需要暂停程序（Stop the world，STW），标记结束之后，用户程序才可以继续执行。为了能够异步执行，减少 STW 的时间，Go 语言采用了三色标记法。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">三色标记算法将程序中的对象分成白色、黑色和灰色三类。</p><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">白色：不确定对象。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">灰色：存活对象，子对象待处理。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">黑色：存活对象。</li></ul><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">标记开始时，所有对象加入白色集合（这一步需 STW ）。首先将根对象标记为灰色，加入灰色集合，垃圾搜集器取出一个灰色对象，将其标记为黑色，并将其指向的对象标记为灰色，加入灰色集合。重复这个过程，直到灰色集合为空为止，标记阶段结束。那么白色对象即可需要清理的对象，而黑色对象均为根可达的对象，不能被清理。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">三色标记法因为多了一个白色的状态来存放不确定对象，所以后续的标记阶段可以并发地执行。当然并发执行的代价是可能会造成一些遗漏，因为那些早先被标记为黑色的对象可能目前已经是不可达的了。所以三色标记法是一个 false negative（假阴性）的算法。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">三色标记法并发执行仍存在一个问题，即在 GC 过程中，对象指针发生了改变。比如下面的例子：</p><figure class="highlight bash" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;">A (黑) -&gt; B (灰) -&gt; C (白) -&gt; D (白)</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">正常情况下，D 对象最终会被标记为黑色，不应被回收。但在标记和用户程序并发执行过程中，用户程序删除了 C 对 D 的引用，而 A 获得了 D 的引用。标记继续进行，D 就没有机会被标记为黑色了（A 已经处理过，这一轮不会再被处理）。</p><figure class="highlight bash" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;">A (黑) -&gt; B (灰) -&gt; C (白) </span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">  ↓</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"> D (白)</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">为了解决这个问题，Go 使用了内存屏障技术，它是在用户程序读取对象、创建新对象以及更新对象指针时执行的一段代码，类似于一个钩子。垃圾收集器使用了写屏障（Write Barrier）技术，当对象新增或更新时，会将其着色为灰色。这样即使与用户程序并发执行，对象的引用发生改变时，垃圾收集器也能正确处理了。</p><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">一次完整的 GC 分为四个阶段：</p><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">1）标记准备(Mark Setup，需 STW)，打开写屏障(Write Barrier)</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">2）使用三色标记法标记（Marking, 并发）</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">3）标记结束(Mark Termination，需 STW)，关闭写屏障。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">4）清理(Sweeping, 并发)</li></ul><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">参考<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://www.fullstack.cafe/golang" style="box-sizing: border-box; text-decoration: none; color: rgb(51, 122, 183); background-color: transparent;">fullstack</a></li></ul></div></details>

## Q6 函数返回局部变量的指针是否安全？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">这在 Go 中是安全的，Go 编译器将会对每个局部变量进行逃逸分析。如果发现局部变量的作用域超出该函数，则不会将内存分配在栈上，而是分配在堆上。</p></div></details>

## Q7 非接口非接口的任意类型 T() 都能够调用 `*T` 的方法吗？反过来呢？

<details open="" style="box-sizing: border-box; margin-top: 10px; margin-bottom: 10px; padding: 5px 10px; border-width: 1px; border-style: solid; border-color: rgb(227, 227, 227) rgb(236, 236, 236) rgb(224, 224, 224) rgb(227, 227, 227); border-image: initial; background-color: rgb(240, 248, 255); box-shadow: rgba(0, 0, 0, 0.07) 1px 2px 1px;"><summary style="box-sizing: border-box; cursor: pointer; font-weight: bold; user-select: none;">答案</summary><div style="box-sizing: border-box;"><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">一个T类型的值可以调用为<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">*T</code>类型声明的方法，但是仅当此T的值是可寻址(addressable) 的情况下。编译器在调用指针属主方法前，会自动取此T值的地址。因为不是任何T值都是可寻址的，所以并非任何T值都能够调用为类型<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">*T</code>声明的方法。</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">反过来，一个<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">*T</code>类型的值可以调用为类型T声明的方法，这是因为解引用指针总是合法的。事实上，你可以认为对于每一个为类型 T 声明的方法，编译器都会为类型<code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">*T</code>自动隐式声明一个同名和同签名的方法。</li></ul><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">哪些值是不可寻址的呢？</p><ul style="box-sizing: border-box; margin: 10px 0px; padding: 0px 0px 0px 1.5em; list-style-type: square;"><li style="box-sizing: border-box; margin: 0px; padding: 0px;">字符串中的字节；</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">map 对象中的元素（slice 对象中的元素是可寻址的，slice的底层是数组）；</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">常量；</li><li style="box-sizing: border-box; margin: 0px; padding: 0px;">包级别的函数等。</li></ul><p style="box-sizing: border-box; margin: 10px 0px 0px; padding: 0px;">举一个例子，定义类型 T，并为类型<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">*T</code><span>&nbsp;</span>声明一个方法<span>&nbsp;</span><code style="box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.05); border-radius: 3px; color: rgb(36, 41, 46); font-size: 0.9em;">hello()</code>，变量 t1 可以调用该方法，但是常量 t2 调用该方法时，会产生编译错误。</p><figure class="highlight go" style="box-sizing: border-box; margin: 10px 0px 20px; padding: 15px; overflow: auto; font-size: 13px; color: rgb(36, 41, 46); background: rgb(246, 248, 250); line-height: 1.8;"><table style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; margin: 0px; display: block; width: auto; overflow: auto; border: none;"><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: transparent; border-top: none;"><td class="code" style="box-sizing: border-box; padding: 0px; text-align: left; border: none !important;"><pre style="box-sizing: border-box; margin: 0px; padding: 1px; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow-wrap: normal; overflow: auto; line-height: 1.8; background: rgb(246, 248, 250); border-radius: 3px; font-size: 13px; color: rgb(36, 41, 46); border: none;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">type</span> T <span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">string</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">(t *T)</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">hello</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	fmt.Println(<span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"hello"</span>)</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;"><span class="function" style="box-sizing: border-box; color: rgb(66, 113, 174);"><span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">func</span> <span class="title" style="box-sizing: border-box; color: rgb(111, 66, 193);">main</span><span class="params" style="box-sizing: border-box; color: rgb(227, 98, 9);">()</span></span> {</span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">var</span> t1 T = <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"ABC"</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	t1.hello() <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// hello</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	<span class="keyword" style="box-sizing: border-box; color: rgb(215, 58, 73);">const</span> t2 T = <span class="string" style="box-sizing: border-box; color: rgb(113, 140, 0);">"ABC"</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">	t2.hello() <span class="comment" style="box-sizing: border-box; color: rgb(106, 115, 125);">// error: cannot call pointer method on t</span></span><br style="box-sizing: border-box;"><span class="line" style="box-sizing: border-box; height: 20px;">}</span><br style="box-sizing: border-box;"></pre></td></tr></tbody></table></figure></div></details>

